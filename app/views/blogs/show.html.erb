<%= stylesheet_link_tag 'templates/blog' %>
<% if File.exist?(Rails.root.join("app/assets/stylesheets", "#{css_file(@blog)}.scss")) %>
  <%= stylesheet_link_tag css_file @blog %>
<% end %>

<div class="post">
  <%= render "partials/blog_header", blog: @blog, header_image: @blog.header_images.find_by(title: true) %>
  <% content = add_content @blog %>
  <%= raw content %>
  <%= render "partials/blog_footer" %>
</div>

<script>
  $(document).ready(function(){
    $(document).foundation();

    if(window.matchMedia('(max-width: 600px)').matches) {
      height = parseInt($('.hero').css("height"));
      $('.hero').css("height", height+"px");
    }

    (function(){
      let en = document.querySelectorAll('.en'),
      id = document.querySelectorAll('.id'),
      jp = document.querySelectorAll('.jp');
      
      if(en.length > 0){
        document.getElementById('lang_en').addEventListener('click', function(){
          $(this).addClass('active');
          $('#lang_id').removeClass('active');
          $('#lang_jp').removeClass('active');
          for(let i = 0; i < en.length; i++){
            en[i].style.display = "block";
            if(id.length > 0){id[i].style.display = "none";}
            if(jp.length > 0){jp[i].style.display = "none";}
          }
        })
      }

      if(id.length > 0){
        document.getElementById('lang_id').addEventListener('click', function(){
          $(this).addClass('active');
          $('#lang_en').removeClass('active');
          $('#lang_jp').removeClass('active');
          for(let i = 0; i < en.length; i++){
            id[i].style.display = "block";
            if(en.length > 0){en[i].style.display = "none";}
            if(jp.length > 0){jp[i].style.display = "none";}
          }
        })
      }

      if(jp.length > 0){
        document.getElementById('lang_jp').addEventListener('click', function(){
          $(this).addClass('active');
          $('#lang_en').removeClass('active');
          $('#lang_id').removeClass('active');
          for(let i = 0; i < en.length; i++){
            jp[i].style.display = "block";
            if(en.length > 0){en[i].style.display = "none";}
            if(id.length > 0){id[i].style.display = "none";}
          }
        })
      }    
    })();
    
  })

</script>